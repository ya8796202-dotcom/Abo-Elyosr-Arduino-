<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Arduino Platform</title>
  <style>
    body{margin:0;font-family:'Cairo',sans-serif;background:linear-gradient(135deg,#a8e063,#56ab2f);color:#222;direction:rtl}
    header,footer{background:#2e7d32;color:#fff;text-align:center;padding:20px}
    .card{background:#ffffffee;margin:20px;padding:20px;border-radius:12px;box-shadow:0 8px 20px rgba(0,0,0,.1)}
    .nav-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px}
    .nav-grid a{display:block;background:#e8f5e9;padding:14px;border-radius:12px;text-decoration:none;color:#0c3;font-weight:bold}
    .chat-window{min-height:200px;display:flex;flex-direction:column;gap:10px}
    .msg{padding:10px 14px;border-radius:12px;max-width:70%}
    .msg.teacher{background:#e8f5e9;align-self:flex-start}
    .msg.student{background:#e3f2fd;align-self:flex-end}
    pre{background:#0b1e10;color:#d6ffd6;padding:12px;border-radius:8px;overflow:auto}
    textarea{width:100%;height:150px;margin-top:10px;background:#0f1f12;color:#b8fcb8;border-radius:8px;padding:10px}
    .out{background:#0b1e10;color:#d6ffd6;padding:10px;border-radius:8px;min-height:80px;margin-top:10px}
    .btn{background:#25D366;color:#fff;border:none;padding:10px 14px;border-radius:8px;cursor:pointer;margin-top:10px}
  </style>
</head>
<body>
<header>
  <h1>منصة تعليم الأردوينو</h1>
  <p>تعلم خطوة بخطوة من خلال الدردشة والكود</p>
</header>

<main>
  <section class="card">
    <h2>الدروس</h2>
    <div class="nav-grid">
      <a href="#intro">مقدمة</a>
      <a href="#blink">تشغيل LED</a>
      <a href="#serial">المنفذ التسلسلي</a>
      <a href="#button">زر التحكم</a>
      <a href="#ultrasonic">حساس مسافة</a>
      <a href="#lm35">حساس حرارة</a>
      <a href="#lcd">شاشة LCD</a>
      <a href="#project">مشروع إنذار</a>
    </div>
  </section>

  <!-- درس مقدمة -->
  <section id="intro" class="card">
    <h2>مقدمة الأردوينو</h2>
    <div id="chatWindow-intro" class="chat-window"></div>
    <button class="btn" onclick="nextMsg('intro')">الرسالة التالية ➡️</button>
    <pre id="codeBlock-intro"></pre>
    <textarea id="codeArea-intro"></textarea>
    <button class="btn" onclick="runCode('intro')">تشغيل (محاكاة)</button>
    <div id="serialOut-intro" class="out"></div>
  </section>

  <!-- درس Blink -->
  <section id="blink" class="card">
    <h2>تشغيل LED</h2>
    <div id="chatWindow-blink" class="chat-window"></div>
    <button class="btn" onclick="nextMsg('blink')">الرسالة التالية ➡️</button>
    <pre id="codeBlock-blink"></pre>
    <textarea id="codeArea-blink"></textarea>
    <button class="btn" onclick="runCode('blink')">تشغيل (محاكاة)</button>
    <div id="serialOut-blink" class="out"></div>
  </section>

  <!-- درس Serial -->
  <section id="serial" class="card">
    <h2>المنفذ التسلسلي</h2>
    <div id="chatWindow-serial" class="chat-window"></div>
    <button class="btn" onclick="nextMsg('serial')">الرسالة التالية ➡️</button>
    <pre id="codeBlock-serial"></pre>
    <textarea id="codeArea-serial"></textarea>
    <button class="btn" onclick="runCode('serial')">تشغيل (محاكاة)</button>
    <div id="serialOut-serial" class="out"></div>
  </section>

  <!-- درس Button -->
  <section id="button" class="card">
    <h2>زر التحكم</h2>
    <div id="chatWindow-button" class="chat-window"></div>
    <button class="btn" onclick="nextMsg('button')">الرسالة التالية ➡️</button>
    <pre id="codeBlock-button"></pre>
    <textarea id="codeArea-button"></textarea>
    <button class="btn" onclick="runCode('button')">تشغيل (محاكاة)</button>
    <div id="serialOut-button" class="out"></div>
  </section>
</main>
<!-- درس Ultrasonic -->
<section id="ultrasonic" class="card">
  <h2>حساس مسافة HC-SR04</h2>
  <div id="chatWindow-ultrasonic" class="chat-window"></div>
  <button class="btn" onclick="nextMsg('ultrasonic')">الرسالة التالية ➡️</button>
  <pre id="codeBlock-ultrasonic"></pre>
  <textarea id="codeArea-ultrasonic"></textarea>
  <button class="btn" onclick="runCode('ultrasonic')">تشغيل (محاكاة)</button>
  <div id="serialOut-ultrasonic" class="out"></div>
</section>

<!-- درس LM35 -->
<section id="lm35" class="card">
  <h2>حساس حرارة LM35</h2>
  <div id="chatWindow-lm35" class="chat-window"></div>
  <button class="btn" onclick="nextMsg('lm35')">الرسالة التالية ➡️</button>
  <pre id="codeBlock-lm35"></pre>
  <textarea id="codeArea-lm35"></textarea>
  <button class="btn" onclick="runCode('lm35')">تشغيل (محاكاة)</button>
  <div id="serialOut-lm35" class="out"></div>
</section>

<!-- درس LCD -->
<section id="lcd" class="card">
  <h2>شاشة LCD</h2>
  <div id="chatWindow-lcd" class="chat-window"></div>
  <button class="btn" onclick="nextMsg('lcd')">الرسالة التالية ➡️</button>
  <pre id="codeBlock-lcd"></pre>
  <textarea id="codeArea-lcd"></textarea>
  <button class="btn" onclick="runCode('lcd')">تشغيل (محاكاة)</button>
  <div id="serialOut-lcd" class="out"></div>
</section>

<!-- درس المشروع -->
<section id="project" class="card">
  <h2>مشروع إنذار متكامل</h2>
  <div id="chatWindow-project" class="chat-window"></div>
  <button class="btn" onclick="nextMsg('project')">الرسالة التالية ➡️</button>
  <pre id="codeBlock-project"></pre>
  <textarea id="codeArea-project"></textarea>
  <button class="btn" onclick="runCode('project')">تشغيل (محاكاة)</button>
  <div id="serialOut-project" class="out"></div>
</section>

<footer><p>© 2025 ياسر</p></footer>

<script>
const lessons = {
  intro: [
    {speaker:'teacher',text:'مرحبا! الأردوينو لوحة تنفذ أوامرنا.'},
    {speaker:'student',text:'إيه أهم الدوال؟'},
    {speaker:'teacher',text:'setup() مرة واحدة و loop() تتكرر.'},
    {speaker:'teacher',text:'الكود:', code:`void setup(){ Serial.begin(9600); Serial.println("أهلاً!"); }
void loop(){ Serial.println("اللووب شغال"); delay(1000); }`}
  ],
  blink: [
    {speaker:'teacher',text:'هدفنا تشغيل وإطفاء LED.'},
    {speaker:'student',text:'إزاي نحدد البن؟'},
    {speaker:'teacher',text:'pinMode(pin, OUTPUT).'},
    {speaker:'teacher',text:'الكود:', code:`const int LED=13;
void setup(){ pinMode(LED, OUTPUT); }
void loop(){ digitalWrite(LED,HIGH); delay(1000); digitalWrite(LED,LOW); delay(1000); }`}
  ],
  serial: [
    {speaker:'teacher',text:'نطبع رسائل عبر Serial.'},
    {speaker:'student',text:'إزاي؟'},
    {speaker:'teacher',text:'Serial.begin ثم Serial.println.'},
    {speaker:'teacher',text:'الكود:', code:`void setup(){ Serial.begin(9600); Serial.println("مرحبا!"); }
void loop(){ Serial.println("الكود شغال..."); delay(1000); }`}
  ],
  button: [
    {speaker:'teacher',text:'نقرأ زر ونشغّل LED.'},
    {speaker:'student',text:'نقرأ الحالة إزاي؟'},
    {speaker:'teacher',text:'digitalRead(pin).'},
    {speaker:'teacher',text:'الكود:', code:`const int LED=13; const int BUTTON=2;
void setup(){ pinMode(LED, OUTPUT); pinMode(BUTTON, INPUT); }
void loop(){ int s=digitalRead(BUTTON); if(s==HIGH) digitalWrite(LED,HIGH); else digitalWrite(LED,LOW); }`}
  ],
  ultrasonic: [
    {speaker:'teacher',text:'حساس المسافة يقيس الزمن بين إرسال واستقبال الموجة.'},
    {speaker:'student',text:'إزاي نحسب المسافة؟'},
    {speaker:'teacher',text:'distance = duration*0.034/2'},
    {speaker:'teacher',text:'الكود:', code:`const int TRIG=9, ECHO=10;
void setup(){ Serial.begin(9600); pinMode(TRIG,OUTPUT); pinMode(ECHO,INPUT); }
void loop(){
  digitalWrite(TRIG,LOW); delayMicroseconds(2);
  digitalWrite(TRIG,HIGH); delayMicroseconds(10);
  digitalWrite(TRIG,LOW);
  long d=pulseIn(ECHO,HIGH);
  int dist=d*0.034/2;
  Serial.println(dist);
  delay(500);
}`}
  ],
  lm35: [
    {speaker:'teacher',text:'حساس LM35 يعطي 10mV لكل درجة.'},
    {speaker:'student',text:'إزاي نطلع درجة الحرارة؟'},
    {speaker:'teacher',text:'voltage=v*(5/1023) ثم tempC=voltage*100'},
    {speaker:'teacher',text:'الكود:', code:`const int SENSOR=A0;
void setup(){ Serial.begin(9600); }
void loop(){
  int v=analogRead(SENSOR);
  float voltage=v*(5.0/1023.0);
  float tempC=voltage*100.0;
  Serial.println(tempC);
  delay(1000);
}`}
  ],
  lcd: [
    {speaker:'teacher',text:'نوصّل شاشة LCD 16x2.'},
    {speaker:'student',text:'إزاي أطبع نص؟'},
    {speaker:'teacher',text:'lcd.print("نص") بعد lcd.begin(16,2).'},
    {speaker:'teacher',text:'الكود:', code:`#include <LiquidCrystal.h>
LiquidCrystal lcd(12,11,5,4,3,2);
void setup(){ lcd.begin(16,2); lcd.print("مرحبا ياسر!"); }
void loop(){ /* اعرض بيانات هنا */ }`}
  ],
  project: [
    {speaker:'teacher',text:'مشروع إنذار: لو المسافة أقل من 20 سم نشغّل LED.'},
    {speaker:'student',text:'ونطبع تحذير على Serial.'},
    {speaker:'teacher',text:'الكود:', code:`const int TRIG=9, ECHO=10, LED=13;
void setup(){ Serial.begin(9600); pinMode(TRIG,OUTPUT); pinMode(ECHO,INPUT); pinMode(LED,OUTPUT); }
void loop(){
  digitalWrite(TRIG,LOW); delayMicroseconds(2);
  digitalWrite(TRIG,HIGH); delayMicroseconds(10);
  digitalWrite(TRIG,LOW);
  long d=pulseIn(ECHO,HIGH);
  int dist=d*0.034/2;
  Serial.println(dist);
  if(dist<20){ digitalWrite(LED,HIGH); Serial.println("⚠️ خطر! قريب"); }
  else{ digitalWrite(LED,LOW); }
  delay(500);
}`}
  ]
};


const stepIndex = {intro:0, blink:0, serial:0, button:0};


function nextMsg(lesson){
  const seq=lessons[lesson];
  if(stepIndex[lesson]>=seq.length) return;
  const m=seq[stepIndex[lesson]++];
  const div=document.createElement('div');
  div.className=`msg ${m.speaker}`;
  div.textContent=m.text;
  document.getElementById(`chatWindow-${lesson}`).appendChild(div);
  if(m.code){
    document.getElementById(`codeBlock-${lesson}`).textContent=m.code;
    document.getElementById(`codeArea-${lesson}`).value=m.code;
  }
}

function runCode(lesson){
  const code=document.getElementById(`codeArea-${lesson}`).value;
  let out='';
  if(code.includes('Serial.println')) out='محاكاة: تم تنفيذ Serial.println';
  else if(code.includes('digitalWrite')) out='محاكاة: تم تنفيذ digitalWrite';
  else out='لا يوجد إخراج';
  document.getElementById(`serialOut-${lesson}`).textContent=out;
}
</script>
</body>
</html>
